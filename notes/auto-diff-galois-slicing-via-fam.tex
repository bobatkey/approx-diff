\subsection{Galois slicing and automatic differentiation via categories of families}
\label{sec:galois-slicing-auto-diff-via-fam}

Recall that $\Fam(\cat{C})$ is the Grothendieck construction $\Grothendieck{X}\Fam(X, \cat{C})$.

\subsubsection{\GPS}
\label{sec:galois-slicing-auto-diff-via-fam:galois-slicing}

$\Fam(\LatGal)$ has:
\begin{itemize}
\item as objects $(X, \partial X)$ all pairs of a set $X$ and and for every $x \in X$, a bounded lattice
$\partial X_x$;
\item as morphisms $(X, \partial X) \to (Y, \partial Y)$, all pairs $(f, \partial f)$ of a function $f: X \to
Y$ and for every $x \in X$, a Galois connection $\partial f_x: \partial X_x \to \partial Y_{f(x)}$.
\end{itemize}

\noindent with the role of the pullback along $f$ in the composition $(g, \partial g) \comp (f, \partial f) =
(g \comp f, \reindex{\partial g}{f} \comp \partial f)$ being to select the appropriate lattice of
approximations and Galois connection at each point.

\subsubsection{Automatic differentiation}
\label{sec:galois-slicing-auto-diff-via-fam:auto-diff}

Consider the functor $\Diff \hookrightarrow \Fam(\FinVect)$ which send objects $\RR^n$ to constant families of
tangent spaces $(\RR^n, \const(\RR^n))$ and morphisms $f: \RR^m \to \RR^n \times (\RR^m \linearto \RR^n)$ to
pairs $(f_1, f_2)$ of differentiable functions $f_1: \RR^m \to \RR^n$ and families of linear maps $f_2:
\{{f_2}_x: \RR^m \linearto \RR^n\}_{x \in \RR^m}$. This exhibits $\Diff$ as equivalent to a full subcategory
of $\Fam(\FinVect)$.

In that subcategory, for any $(f, \partial f): (\RR^m, \const(\RR^m)) \to (\RR^n, \const(\RR^n))$ and $(g,
\partial g): (\RR^n, \const(\RR^n)) \to (\RR^k, \const(\RR^k))$, we have that for any $x \in \RR^m$:
\begin{itemize}
\item $\partial f_x: \RR^m \to \RR^n$;
\item $\reindex{\partial g}{f}_x = \partial g_{f(x)}: \RR^n \to \RR^k$.
\end{itemize}

\noindent The composition $(g, \partial g) \comp (f, \partial f) = (g \comp f, \reindex{\partial g}{f} \comp
\partial f): (\RR^m, \const(\RR^m)) \to (\RR^k, \const(\RR^k))$ corresponds exactly to the forward chain rule,
since $(\reindex{\partial g}{f} \comp \partial f)_x = {\partial g}_{f(x)} \comp {\partial f}_x$.

Similarly, $\Diff^*$ is equivalent to a full subcategory of $\Fam(\FinVect^\op)$ with composition
corresponding to the backward chain rule.
